<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Fixed-Point Report for fixed_rivas</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<h3>Generated on  2016-02-25 00:24:17</h3>
The following table shows fixed point instrumentation results<BR/>
<body style="font-family: monospace">
<h2><font face="Arial, Helvetica, sans-serif" color="#990000">Fixed-Point Report 
fir>1
<BR/></h2></font>
<pre>function [y,z] = fir(b,x,z)
    y = zeros( size( x ) );
    for n = 1:length( x )
        z = [ x( n ); z( 1:end - 1 ) ];
        y( n ) = b*z;
    end
end
</pre><TABLE border="1"><TR BGCOLOR="#99CCFF"><th> <B>Variable Name</B> </th><th align="center"> <B>Type</B> </th><th align="center"> <B>Sim Min</B> </th><th align="center"> <B>Sim Max</B> </th><th align="center"> <B>Static Min</B> </th><th align="center"> <B>Static Max</B> </th><th align="center"> <B>Whole Number</B> </th><th align="right"> <B>ProposedType <BR> (Best For WL = 16)</B> </th></TR><TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">b</TD><TD style="border-style: none" align="left">double 1 x 8 </TD><TD style="border-style: none" align="right">-1</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="right">-1</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(1, 2, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">n</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="right">7</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">21594</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 15, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">x</TD><TD style="border-style: none" align="left">double 1 x 7 </TD><TD style="border-style: none" align="right">955</TD><TD style="border-style: none" align="right">955</TD><TD style="border-style: none" align="right">-2048.0000000000014</TD><TD style="border-style: none" align="right">2048.000000000004</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(1, 13, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">y</TD><TD style="border-style: none" align="left">double 1 x 7 </TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">955</TD><TD style="border-style: none" align="right">-2048.0000000000036</TD><TD style="border-style: none" align="right">2048.0000000000064</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(1, 13, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">z</TD><TD style="border-style: none" align="left">double 8 x 1 </TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">955</TD><TD style="border-style: none" align="right">-2048.0000000000014</TD><TD style="border-style: none" align="right">2048.000000000004</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(1, 13, 0)</TD></TR>
</TABLE>
<BR>
<body style="font-family: monospace">
<h2><font face="Arial, Helvetica, sans-serif" color="#990000">Fixed-Point Report 
fir>2
<BR/></h2></font>
<pre>function [y,z] = fir(b,x,z)
    y = zeros( size( x ) );
    for n = 1:length( x )
        z = [ x( n ); z( 1:end - 1 ) ];
        y( n ) = b*z;
    end
end
</pre><TABLE border="1"><TR BGCOLOR="#99CCFF"><th> <B>Variable Name</B> </th><th align="center"> <B>Type</B> </th><th align="center"> <B>Sim Min</B> </th><th align="center"> <B>Sim Max</B> </th><th align="center"> <B>Static Min</B> </th><th align="center"> <B>Static Max</B> </th><th align="center"> <B>Whole Number</B> </th><th align="right"> <B>ProposedType <BR> (Best For WL = 16)</B> </th></TR><TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">b</TD><TD style="border-style: none" align="left">double 1 x 8 </TD><TD style="border-style: none" align="right">-1</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="right">-1</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="left">No</TD><TD style="border-style: none" align="left">numerictype(1, 16, 14)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">n</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="right">21594</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">21594</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 15, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">x</TD><TD style="border-style: none" align="left">double 1 x 21594 </TD><TD style="border-style: none" align="right">-329</TD><TD style="border-style: none" align="right">1342</TD><TD style="border-style: none" align="right">-2048.0000000000014</TD><TD style="border-style: none" align="right">2048.000000000004</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(1, 13, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">y</TD><TD style="border-style: none" align="left">double 1 x 21594 </TD><TD style="border-style: none" align="right">-329</TD><TD style="border-style: none" align="right">389</TD><TD style="border-style: none" align="right">-2048.0000000000036</TD><TD style="border-style: none" align="right">2048.0000000000064</TD><TD style="border-style: none" align="left">No</TD><TD style="border-style: none" align="left">numerictype(1, 16, 3)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">z</TD><TD style="border-style: none" align="left">double 8 x 1 </TD><TD style="border-style: none" align="right">-329</TD><TD style="border-style: none" align="right">1342</TD><TD style="border-style: none" align="right">-2048.0000000000014</TD><TD style="border-style: none" align="right">2048.000000000004</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(1, 13, 0)</TD></TR>
</TABLE>
<BR>
<body style="font-family: monospace">
<h2><font face="Arial, Helvetica, sans-serif" color="#990000">Fixed-Point Report 
fixed_rivas
<BR/></h2></font>
<pre>function [RpeakPos,Rpeak,ECG_d,ECG_i,ECG_s] = fixed_rivas(ECG)
    %function [RpeakPos Rpeak ] = fixed_rivas(ECG)
    %ECG has to be long 21600 = 1 minute of recordings
    %initaliazing
    len = 21600;
    Nd = 7;
    ECG_d = zeros( 1, len - Nd + 1 );
    ECG_i = zeros( 1, len - Nd + 1 );
    ECG_s = zeros( 1, len - Nd + 1 );
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %%DIFFERENTIATOR
    %difference equation: y(n)= x[n] -x[n-Nd]
    %Nd = 7; %round(3*fs/128) -1;
    bd = [ 1, zeros( 1, Nd - 1 ), -1 ];
    zd = zeros( length( bd ), 1 );
    [ECG_d1,zd1] = fir( bd, ECG( 1:Nd ), zd );  %get initial conditions accounting for delay
    ECG_d = fir( bd, ECG( Nd:len ), zd1 );
    %
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %%MOVING WINDOW INTEGRATOR
    %%% Moving average y[n] =  1/(N-1) \Sigma_{k=0}^{N-1} x[n-k]
    N = Nd + 1;  %window of the moving average
    %b = (1/(N-1))*ones(1,N);; %this is the one on the paper but I think it's wrong
    bi = (1/N)*ones( 1, N );
    zi = zeros( length( bi ), 1 );
    ECG_i = fir( bi, ECG_d, zi );
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %%%SQUARING
    ECG_s = ECG_i .* ECG_i;
    %
    %%end of preprocessing stage
    %
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %PEAK Detection stage
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    x = ECG;
    y = ECG_s;  %output of the preprocessing stage
    %RRmin = 200e-3*fs;
    RRmin = 72;
    QRSint = 21.6;  %60e-3*fs;
    %Pth= 0.7*fs/128 + 4.7;
    K = 0.98164;  %6214845220;
    i = 1;  %signal index
    r = 1;  %R peaks and positions index
    th = 0;  %threshold
    count = 0;
    Rpeak = zeros( 1, len );
    RpeakPos = Rpeak;
    %Rpeak=[];
    %RpeakPos=[];
    while (i< len - Nd + 1)
        %State 1
        count = 0;
        peak = y( i );
        peakPos = i;
        while (count< =RRmin + QRSint)
            if (y( i )>peak)
                peak = y( i );
                peakPos = i;
            end
            count = count + 1;
            i = i + 1;
            if (i>=len - Nd + 1)  %to avoid going out of bounds
                break
            end
        end
        Rpeak( r ) = peak;
        RpeakPos( r ) = peakPos;
        count = i - RpeakPos( r ) - 1;  %to compensate
        r = r + 1;
        %State 2
        while (count< =RRmin)
            count = count + 1;
        end
        th = mean( Rpeak );
        %State 3
        while (y( i )< =th)
            i = i + 1;
            if (i>=len - Nd + 1)  %to avoid going out of bounds
                break
            end
            th = th*K;
        end
    end
end
</pre><TABLE border="1"><TR BGCOLOR="#99CCFF"><th> <B>Variable Name</B> </th><th align="center"> <B>Type</B> </th><th align="center"> <B>Sim Min</B> </th><th align="center"> <B>Sim Max</B> </th><th align="center"> <B>Static Min</B> </th><th align="center"> <B>Static Max</B> </th><th align="center"> <B>Whole Number</B> </th><th align="right"> <B>ProposedType <BR> (Best For WL = 16)</B> </th></TR><TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">ECG</TD><TD style="border-style: none" align="left">double 1 x 21600 </TD><TD style="border-style: none" align="right">892</TD><TD style="border-style: none" align="right">1342</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">2048</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 12, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">ECG_d</TD><TD style="border-style: none" align="left">double 1 x 21594 </TD><TD style="border-style: none" align="right">-329</TD><TD style="border-style: none" align="right">389</TD><TD style="border-style: none" align="right">-2048.0000000000014</TD><TD style="border-style: none" align="right">2048.000000000004</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(1, 13, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">ECG_d1</TD><TD style="border-style: none" align="left">double 1 x 7 </TD><TD style="border-style: none" align="right">955</TD><TD style="border-style: none" align="right">955</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">2048</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 12, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">ECG_i</TD><TD style="border-style: none" align="left">double 1 x 21594 </TD><TD style="border-style: none" align="right">-224.25</TD><TD style="border-style: none" align="right">252.25</TD><TD style="border-style: none" align="right">-2048.0000000000036</TD><TD style="border-style: none" align="right">2048.0000000000064</TD><TD style="border-style: none" align="left">No</TD><TD style="border-style: none" align="left">numerictype(1, 16, 3)</TD></TR>
<TR style="background-color: #FFA500">
<TD style="border-style: none" align="left">ECG_s</TD><TD style="border-style: none" align="left">double 1 x 21594 </TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">63630.0625</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">4194304.000000026</TD><TD style="border-style: none" align="left">No</TD><TD style="border-style: none" align="left">numerictype(0, 16, -7)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">K</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">0.98164</TD><TD style="border-style: none" align="right">0.98164</TD><TD style="border-style: none" align="right">0.98164</TD><TD style="border-style: none" align="right">0.98164</TD><TD style="border-style: none" align="left">No</TD><TD style="border-style: none" align="left">numerictype(0, 16, 16)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">N</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">8</TD><TD style="border-style: none" align="right">8</TD><TD style="border-style: none" align="right">8</TD><TD style="border-style: none" align="right">8</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 4, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">Nd</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">7</TD><TD style="border-style: none" align="right">7</TD><TD style="border-style: none" align="right">7</TD><TD style="border-style: none" align="right">7</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 3, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">QRSint</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">21.6</TD><TD style="border-style: none" align="right">21.6</TD><TD style="border-style: none" align="right">21.6</TD><TD style="border-style: none" align="right">21.6</TD><TD style="border-style: none" align="left">No</TD><TD style="border-style: none" align="left">numerictype(0, 16, 11)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">RRmin</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">72</TD><TD style="border-style: none" align="right">72</TD><TD style="border-style: none" align="right">72</TD><TD style="border-style: none" align="right">72</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 7, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">Rpeak</TD><TD style="border-style: none" align="left">double 1 x 21600 </TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">63630.0625</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">2048</TD><TD style="border-style: none" align="left">No</TD><TD style="border-style: none" align="left">numerictype(0, 16, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">RpeakPos</TD><TD style="border-style: none" align="left">double 1 x 21600 </TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">21585</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">21600</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 15, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">bd</TD><TD style="border-style: none" align="left">double 1 x 8 </TD><TD style="border-style: none" align="right">-1</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="right">-1</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(1, 2, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">bi</TD><TD style="border-style: none" align="left">double 1 x 8 </TD><TD style="border-style: none" align="right">0.125</TD><TD style="border-style: none" align="right">0.125</TD><TD style="border-style: none" align="right">0.125</TD><TD style="border-style: none" align="right">0.125</TD><TD style="border-style: none" align="left">No</TD><TD style="border-style: none" align="left">numerictype(0, 16, 18)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">count</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">94</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">94</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 7, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">i</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="right">21595</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="right">21588</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 15, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">len</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">21600</TD><TD style="border-style: none" align="right">21600</TD><TD style="border-style: none" align="right">21600</TD><TD style="border-style: none" align="right">21600</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 15, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">peak</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">63630.0625</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">Inf</TD><TD style="border-style: none" align="left">No</TD><TD style="border-style: none" align="left">numerictype(0, 16, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">peakPos</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="right">21585</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="right">21600</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 15, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">r</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="right">171</TD><TD style="border-style: none" align="right">1</TD><TD style="border-style: none" align="right">21600</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 15, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">th</TD><TD style="border-style: none" align="left">double</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">142.72305266203705</TD><TD style="border-style: none" align="right">-Inf</TD><TD style="border-style: none" align="right">Inf</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 8, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">x</TD><TD style="border-style: none" align="left">double 1 x 21600 </TD><TD style="border-style: none" align="right">892</TD><TD style="border-style: none" align="right">1342</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">2048</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 12, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">y</TD><TD style="border-style: none" align="left">double 1 x 21594 </TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">63630.0625</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">Inf</TD><TD style="border-style: none" align="left">No</TD><TD style="border-style: none" align="left">numerictype(0, 16, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">zd</TD><TD style="border-style: none" align="left">double 8 x 1 </TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 1, 0)</TD></TR>
<TR style="background-color: #eeeeff">
<TD style="border-style: none" align="left">zd1</TD><TD style="border-style: none" align="left">double 8 x 1 </TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">955</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">2048</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 12, 0)</TD></TR>
<TR style="background-color: #ffffff">
<TD style="border-style: none" align="left">zi</TD><TD style="border-style: none" align="left">double 8 x 1 </TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="right">0</TD><TD style="border-style: none" align="left">Yes</TD><TD style="border-style: none" align="left">numerictype(0, 1, 0)</TD></TR>
</TABLE>
<BR>
</body>
</html>
